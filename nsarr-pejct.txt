between services soit grpc or rest 
documentation in swager
kaffka for real time 
postgres sql or mongodb casanda
no need spring cloud cause we will use k8s 
achat d ticket cherche pour l construction 
ticket 
abonements




abonnement
ðŸ”„ How They Work Together

  Typical Flow:

  1. ADMIN creates Forfait
     â””â”€> "Mensuel Standard" - 200 MAD for 30 days

  2. USER selects Forfait and subscribes
     â””â”€> System creates Abonnement
         â”œâ”€> Copies prix (200 MAD) and devise from Forfait (SNAPSHOT!)
         â”œâ”€> Sets dates (2025-01-15 to 2025-02-15)
         â””â”€> Sets status to ACTIF

  3. System automatically generates Facture
     â””â”€> Links to Abonnement
     â””â”€> Creates invoice number "FAC-2025-00123"
     â””â”€> Sets montant = 200 MAD
     â””â”€> Status = EN_ATTENTE (until payment processed)

  4. Payment service processes payment
     â””â”€> Updates Facture status to PAYEE

  5. Subscription expires on 2025-02-15
     â””â”€> System updates Abonnement status to EXPIRE

ðŸŽ¯ Why This Design?

  Historical Accuracy:
  - If admin changes Forfait price from 200 MAD to 250 MAD
  - Existing subscribers keep their 200 MAD price (stored in Abonnement snapshot)
  - Only NEW subscribers pay 250 MAD

  Legal/Accounting:
  - Facture provides official financial record
  - Required for audits, refunds, and compliance
  - Separate from subscription logic

  Flexibility:
  - Can deactivate old Forfaits without deleting them
  - Can offer promotional prices (create new Forfait)
  - Can track price history through Abonnement snapshots
